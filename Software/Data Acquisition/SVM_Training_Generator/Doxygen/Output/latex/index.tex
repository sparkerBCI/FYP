\DoxyHorRuler{0}


\begin{DoxyAuthor}{Author}
Sam Parker 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+03
\end{DoxyVersion}
\hypertarget{index_intro_sec}{}\doxysection{Introduction}\label{index_intro_sec}
This is the software for the Sparker Wireless E\+EG Data Acquisition System. It was developed by Sam Parker as part of his Electrical Engineering Final Year Project at the University of Newcastle, Australia. This software contains interface functions to set-\/up, configure, and operate a Texas Instruments A\+D\+S1299 E\+EG Analog Front End device. It then pipes the data to a serial port (U\+SB or Bluetooth).\hypertarget{index_mech}{}\doxysection{Mechanics}\label{index_mech}
The software is relatively simple. It instantiates a Pin\+\_\+\+Map, which tells the device how the pins are mapped. If this software is being run on a board other than the Sparker Data Acquisition System, you need to check the Pin\+\_\+\+Map is still correct. It then uses the Pin\+\_\+\+Map to communicate with the A\+D\+S1299 over an S\+PI interface. The device is configured for the Sparker Data Acquisition board, so if it is to be used with a different recording montage, new data rate, etc. the setup process will need to be altered. Serial communications are managed by the Serial Module, which also has debug, warning, and error messages. These messages should only be used when send data over U\+SB and you will need to check for the ID byte to distinguish between real data ana a message. If communicating over bluetooth, or these messages aren\textquotesingle{}t desired, they can be switched off individually.\hypertarget{index_walkthrough}{}\doxysection{Walkthrough of the Read Process}\label{index_walkthrough}
Assuming your device has been set up correctly (big assumption), the main loop checks to see if the device is running. At this point there is no way to start the device remotely (i.\+e. from the host serial device), but I might add this later if I think it is useful. If the device is running, the status L\+ED will flash. The device will then poll the Data Ready pin until it goes low, when it issues the R\+D\+A\+TA command, which sends 1 sample over the S\+PI interface. The sample ID bits are checked to make sure it\textquotesingle{}s not corrupt, then it\textquotesingle{}s processed and given a sequential sample ID. Sample I\+Ds start at 1, and sample I\+Ds of 0 mean the sample is invalid. But Sam, you say, doesn\textquotesingle{}t that mean that when the Sample I\+Ds overflow a good sample will be read as invalid? Yes it does. But the sample I\+Ds won\textquotesingle{}t overflow for 192 days of continuous recording, and if you\textquotesingle{}re running this thing for 192 days you should use a better D\+AQ system. Valid samples are then sent over the serial interface (38400 baud) in the format (sample ID)(Channel 1)(Channel 2)(Channel 3) ...(Channel 8)(\textbackslash{}n). Everything except the \textbackslash{}n are uint32\+\_\+ts in 8 data bits, no parity, 1 stop bit. Data is sent M\+SB first, most significant byte first. It then polls the Data Ready pin and starts again. 